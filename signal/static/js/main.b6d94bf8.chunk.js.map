{"version":3,"sources":["component/RandomEmoji.tsx","view/FrontPage.tsx","infrastructure/api.ts","component/Loading.tsx","component/Advertisement.tsx","component/LocalVideo.tsx","component/RemoteVideo.tsx","view/Room.tsx","component/Transition.tsx","view/Join.tsx","view/Create.tsx","App/index.tsx","index.tsx"],"names":["smilyAndPeople","getRandomEmoji","Math","floor","random","length","RandomEmoji","interval","useState","emoji","setEmoji","useEffect","intervalIndex","setInterval","clearInterval","FrontPage","className","to","mock","response","a","Promise","resolve","promise","setTimeout","api","roomCode","isPrivate","e","console","error","alert","password","Error","Loading","tag","Tag","isLoading","bound","style","children","position","Advertisement","LocalVideo","onLoad","videoRef","useRef","mediaStream","onLoadref","loaded","setLoaded","current","initVideo","useCallback","videoElement","navigator","mediaDevices","getUserMedia","video","audio","srcObject","addEventListener","once","autoPlay","muted","playsInline","ref","transform","RemoteVideo","Room","code","useParams","isRoomPrivate","setRoomPrivate","isLocalVideoLoaded","setLocalVideoLoaded","isRemoteVideoLoaded","setRemoteVideoLoaded","isRoomFetched","setRoomFetched","setFetchingRoomKey","isWrongPassword","setWrongPassword","setPassword","roomKey","setRoomKey","passwordInputRef","fetchRoom","enterRoom","undefined","focus","parseInt","onSubmit","preventDefault","htmlFor","id","required","type","value","onChange","target","direction","TOP","Symbol","RIGHT","BOTTOM","LEFT","TransitionSwitch","on","off","onRef","offRef","Popup","path","exact","from","disableOnFirst","transition","isOn","setOn","shouldBeOnRef","isPresent","setPresent","isOnRef","transitionendListener","container","removeEventListener","offsetWidth","description","Join","history","useHistory","setCode","isFocused","setFocused","inputRef","push","inputMode","opacity","zIndex","onFocus","onBlur","onKeyDown","keyCode","slice","blur","Array","fill","map","_","i","onClick","Create","App","render","params","match","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b6d94bf8.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\n\nconst smilyAndPeople = [\n  \"😀\", \"😃\", \"😄\", \"😁\", \"😆\", \"😅\", \"😂\", \"🤣\", \"☺️\", \"😊\", \"😇\", \"🙂\", \"🙃\", \"😉\", \"😌\", \"😍\", \"😘\", \"😗\", \"😙\",\n  \"😚\", \"😋\", \"😜\", \"😝\", \"😛\", \"🤑\", \"🤗\", \"🤓\", \"😎\", \"🤡\", \"🤠\", \"😏\", \"😒\", \"😞\", \"😔\", \"😟\", \"😕\", \"🙁\",\n  \"😣\", \"😖\", \"😫\", \"😩\", \"😤\", \"😠\", \"😡\", \"😶\", \"😐\", \"😑\", \"😯\", \"😦\", \"😧\", \"😮\", \"😲\", \"😵\", \"😳\", \"😱\", \"😨\",\n  \"😰\", \"😢\", \"😥\", \"🤤\", \"😭\", \"😓\", \"😪\", \"😴\", \"🙄\", \"🤔\", \"🤥\", \"😬\", \"🤐\", \"🤢\", \"🤧\", \"😷\", \"🤒\", \"🤕\",\n  \"😈\", \"👿\", \"👹\", \"👺\", \"💩\", \"👻\", \"💀\", \"☠️\", \"👽\", \"👾\", \"🤖\", \"🎃\", \"😺\", \"😸\", \"😹\", \"😻\", \"😼\", \"😽\", \"🙀\",\n  \"😿\", \"😾\"]\n\nconst getRandomEmoji = () => smilyAndPeople[Math.floor(Math.random() * smilyAndPeople.length)];\n\nconst RandomEmoji = ({interval = 500}: { interval?: number }) => {\n  const [emoji, setEmoji] = useState(getRandomEmoji());\n  useEffect(() => {\n    const intervalIndex = setInterval(() => setEmoji(getRandomEmoji()), interval);\n    return () => clearInterval(intervalIndex)\n  })\n  return <>{emoji}</>;\n};\n\nexport default RandomEmoji;","import React from 'react'\nimport {Link} from \"react-router-dom\"\nimport './FrontPage.scss'\nimport RandomEmoji from \"../component/RandomEmoji\";\n\nconst FrontPage = () => (\n  <main className=\"frontpage\">\n      <div className=\"banner\">\n        <RandomEmoji interval={800}/>\n        &nbsp;💻&nbsp;⇆📱&nbsp;\n        <RandomEmoji interval={900}/>\n      </div>\n      <Link to=\"./join\" className=\"button big join\">\n        <span className=\"icon\">🔑</span>\n        참여하기\n      </Link><br/>\n      <Link to=\"./create\" className=\"button big create\">\n        <span className=\"icon\">🔨</span>\n        만들기\n      </Link>\n  </main>\n)\n\nexport default FrontPage","let LATENCY = 1000;\n\nconst mock = async <T>(response: () => T | Promise<T>): Promise<T> => new Promise(resolve => {\n  const promise = Promise.resolve(typeof response === 'function' ? response() : response);\n  setTimeout(() => resolve(promise), LATENCY)\n});\n\ninterface RoomResponse {\n  roomCode: number,\n  isPrivate: boolean\n}\n\nexport const api = {\n  getRoom: (roomCode: number) => mock<RoomResponse>(() => ({\n    roomCode,\n    isPrivate: true,\n  })),\n  handleError(e: Error) {\n    console.error(e);\n    alert(\"🙀 오류가 발생하였습니다.\")\n  },\n  fetchRoomKey: ({password}: { password: string }) => mock<string>(() => {\n    if (password === '1234') return 'AWSConnectionId';\n    else throw new Error();\n  })\n}","import React from 'react';\nimport './Loading.scss'\n\ntype LoadingProps = {\n  tag?: keyof JSX.IntrinsicElements,\n  isLoading: boolean,\n  bound?: boolean,\n  children: React.ReactNode,\n  className?: string,\n  style?: React.CSSProperties,\n};\n\nconst Loading = ({tag: Tag = 'div', isLoading, bound = false, className = '', style, children}: LoadingProps) => {\n  return (\n    <Tag className={`loading-container ${className}`}\n         style={{...style, ...bound ? {position: 'relative'} : {}}}>\n      {children}\n      {isLoading && <div className=\"spinner\"/>}\n    </Tag>\n  );\n};\n\nexport default Loading;","import React from 'react';\nimport './Advertizement.scss'\n\nconst Advertisement = () => {\n  return (\n    <div className=\"advertisement\">\n      광고영역\n    </div>\n  );\n};\n\nexport default Advertisement;","import React, {useCallback, useEffect, useRef, useState} from 'react';\nimport './LocalVideo.scss'\n\nconst LocalVideo = ({onLoad = () => {}}: { onLoad?: () => void }) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const mediaStream = useRef<MediaStream>();\n  const onLoadref = useRef<() => void>(onLoad);\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    onLoadref.current = onLoad\n  }, [onLoad])\n\n  const initVideo = useCallback(async (videoElement: HTMLVideoElement) => {\n    mediaStream.current = await navigator.mediaDevices.getUserMedia({video: true, audio: true})\n    if (videoElement) videoElement.srcObject = mediaStream.current;\n    await new Promise(resolve => videoElement.addEventListener('play', resolve, {once: true}));\n    setLoaded(true)\n    onLoadref.current();\n  }, []);\n\n  useEffect(() => {\n    if (videoRef.current) initVideo(videoRef?.current)\n  }, [initVideo])\n\n  return (\n    <div className={`local-video ${loaded ? '' : 'unloaded'}`}>\n      <video autoPlay muted playsInline ref={videoRef} style={{transform: `rotateY(180deg)`}}/>\n    </div>\n  );\n};\n\nexport default LocalVideo;","import React, {useCallback, useEffect, useRef, useState} from 'react';\nimport './LocalVideo.scss'\n\nconst RemoteVideo = ({onLoad = () => {}}: { onLoad?: () => void }) => {\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const mediaStream = useRef<MediaStream>();\n  const onLoadref = useRef<() => void>(onLoad);\n  const [loaded, setLoaded] = useState(false);\n\n  useEffect(() => {\n    onLoadref.current = onLoad\n  }, [onLoad])\n\n  const initVideo = useCallback(async (videoElement: HTMLVideoElement) => {\n    mediaStream.current = await navigator.mediaDevices.getUserMedia({video: true, audio: true})\n    if (videoElement) videoElement.srcObject = mediaStream.current;\n    await new Promise(resolve => videoElement.addEventListener('play', resolve, {once: true}));\n    setLoaded(true)\n    onLoadref.current();\n  }, []);\n\n  useEffect(() => {\n    if (videoRef.current) initVideo(videoRef?.current)\n  }, [initVideo])\n\n  return (\n    <div className={`remote-video ${loaded ? '' : 'unloaded'}`}>\n      <video autoPlay muted playsInline ref={videoRef} style={{transform: `rotateY(180deg)`}}/>\n    </div>\n  );\n};\n\nexport default RemoteVideo;","import React, {useEffect, useRef, useState} from 'react';\nimport {Link, useHistory, useParams} from \"react-router-dom\";\nimport './Room.scss'\nimport {api} from \"../infrastructure/api\";\nimport Loading from '../component/Loading';\nimport Advertisement from '../component/Advertisement';\nimport LocalVideo from '../component/LocalVideo';\nimport RemoteVideo from \"../component/RemoteVideo\";\n\nexport interface RoomParams {\n  code: string,\n}\n\nconst Room = () => {\n  const {code} = useParams<RoomParams>();\n  const [isRoomPrivate, setRoomPrivate] = useState<boolean>(false);\n  const [isLocalVideoLoaded, setLocalVideoLoaded] = useState<boolean>(false);\n  const [isRemoteVideoLoaded, setRemoteVideoLoaded] = useState<boolean>(false);\n  const [isRoomFetched, setRoomFetched] = useState(false);\n  const [isFetchingRoomKey, setFetchingRoomKey] = useState(false);\n  const [isWrongPassword, setWrongPassword] = useState(false);\n  const [password, setPassword] = useState('');\n  const [roomKey, setRoomKey] = useState<string>();\n  const passwordInputRef = useRef<HTMLInputElement>(null);\n\n  const fetchRoom = async (roomCode: number): Promise<void> => {\n    try {\n      const {isPrivate} = await api.getRoom(roomCode);\n      setRoomPrivate(isPrivate);\n    } catch (e) {\n      api.handleError(e)\n    } finally {\n      setRoomFetched(true)\n    }\n  };\n\n  const enterRoom = async () => {\n    try {\n      setFetchingRoomKey(true);\n      setRoomKey(await api.fetchRoomKey({password}));\n      setWrongPassword(false)\n    } catch (e) {\n      setRoomKey(undefined);\n      setWrongPassword(true);\n      passwordInputRef?.current?.focus();\n    } finally {\n      setFetchingRoomKey(false);\n    }\n  }\n\n  useEffect(() => {\n    fetchRoom(parseInt(code, 10));\n  }, [code])\n\n  return <>\n    <Loading tag=\"main\" className={`room ${roomKey ? 'entered' : ''}`}\n             isLoading={false}>\n      {roomKey && (\n        <Loading className=\"remote-video-container\" isLoading={!isRemoteVideoLoaded}>\n          <RemoteVideo onLoad={() => setRemoteVideoLoaded(true)}/>\n        </Loading>\n      )}\n      <Loading className=\"local-video-container\" isLoading={!isLocalVideoLoaded}>\n        <LocalVideo onLoad={() => setLocalVideoLoaded(true)}/>\n      </Loading>\n      {isRoomFetched && (\n        <form className={`controls ${isRoomPrivate ? 'is-room-private' : ''}`} onSubmit={e => {\n          e.preventDefault();\n          enterRoom();\n        }}>\n          {isRoomPrivate && <>\n            <label htmlFor=\"room-password\" className={isWrongPassword ? 'wrong' : ''}>\n              {isWrongPassword ? '올바른 비밀번호를 입력해주세요' : '비밀번호'}\n            </label>\n            <input id=\"room-password\" required type=\"password\" className=\"input big control password\"\n                   ref={passwordInputRef} value={password} onChange={e => setPassword(e.target.value)}/>\n          </>}\n          <button type=\"submit\" className=\"button big control enter\">\n            <span className=\"icon\">🚪</span>\n            입장\n          </button>\n        </form>\n      )}\n    </Loading>\n    <footer>\n      <Advertisement/>\n    </footer>\n  </>;\n};\n\nexport default Room;","import React, {useEffect, useRef, useState} from \"react\"\nimport {Route} from \"react-router-dom\"\nimport './transition.scss'\n\nexport const direction = {\n  TOP: Symbol('top'),\n  RIGHT: Symbol('right'),\n  BOTTOM: Symbol('bottom'),\n  LEFT: Symbol('left'),\n}\n\nconst TransitionSwitch = ({on, off}: { on: () => void, off: () => void }) => {\n  const onRef = useRef(on);\n  const offRef = useRef(off);\n\n  useEffect(() => {\n    onRef.current = on\n  }, [on])\n\n  useEffect(() => {\n    offRef.current = off\n  }, [off])\n\n  useEffect(() => {\n    onRef.current()\n    return offRef.current\n  }, [])\n  return null\n}\n\ntype PopupProps = {\n  path: string,\n  exact?: boolean,\n  from: Symbol,\n  disableOnFirst?: boolean,\n  transition?: string,\n  children: React.ReactNode\n};\n\nexport const Popup = ({path, exact, from, disableOnFirst = false, transition = '.3s', children}: PopupProps) => {\n  const [isOn, setOn] = useState(disableOnFirst)\n  const ref = useRef<HTMLDivElement>(null)\n  const shouldBeOnRef = useRef<boolean>(false)\n  const [isPresent, setPresent] = useState(disableOnFirst)\n\n  const isOnRef = useRef<boolean>(isOn)\n  useEffect(() => {\n    isOnRef.current = isOn\n  }, [isOn])\n\n  useEffect(() => {\n    if (ref.current == null) return\n\n    const transitionendListener = () => {\n      if (!isOnRef.current) setPresent(false)\n    }\n    const container = ref.current\n\n    container.addEventListener('transitionend', transitionendListener)\n    return () => container.removeEventListener('transitionend', transitionendListener)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [ref.current])\n\n\n  useEffect(() => {\n    if (isPresent && ref.current != null && shouldBeOnRef.current) {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const causeReflow = ref.current.offsetWidth; // do not remove : trick for transition start\n      setOn(true);\n      shouldBeOnRef.current = false;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isPresent, ref.current])\n\n  return (\n    <>\n      <Route path={path} exact={exact}>\n        <TransitionSwitch\n          on={() => {\n            setPresent(true);\n            shouldBeOnRef.current = true;\n          }}\n          off={() => setOn(false)}/>\n      </Route>\n      {isPresent && (\n        <div ref={ref} className={`transition popup ${isOn ? 'on' : from.description}`}\n             style={{transition: transition}}>\n          {children}\n        </div>)}\n    </>\n  )\n}\n","import React, {useEffect, useRef, useState} from 'react';\nimport {useHistory} from \"react-router-dom\";\nimport './Join.scss'\n\nconst MAX_LENGTH = 6;\n\nconst Join = () => {\n  const history = useHistory();\n  const [code, setCode] = useState(\"\");\n  const [isFocused, setFocused] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (code.length >= 6) history.push(`/${code}`)\n  }, [code])\n\n  return (\n    <main className=\"join\">\n      <label className={`inputs ${isFocused ? 'focus' : ''}`}>\n        <input ref={inputRef} type=\"number\"\n               inputMode=\"numeric\"\n               value={code}\n               style={{opacity: 0, zIndex: -1, position: \"absolute\"}}\n               onFocus={() => setFocused(true)}\n               onBlur={() => setFocused(false)}\n               onKeyDown={e => {\n                 if (e.keyCode !== 8 && !(48 <= e.keyCode && e.keyCode <= 57)) {\n                   e.preventDefault();\n                 }\n               }}\n               onChange={e => {\n                 setCode(`${e.target.value}`.slice(0, MAX_LENGTH));\n                 if (e.target.value.length >= MAX_LENGTH) {\n                   inputRef?.current?.blur()\n                 }\n               }}/>\n        {new Array(MAX_LENGTH).fill(null)\n          .map((_, i) =>\n            <span key={i} className={`individual-number ${code.length === i ? 'last' : ''}`}\n                  onClick={() => inputRef?.current?.focus()}>{code[i] || ' '}</span>\n          )}\n      </label>\n    </main>\n  );\n};\n\nexport default Join;","import React from 'react';\nimport './Create.scss'\n\nconst Create = () => {\n  return (\n    <main className=\"create\">\n    </main>\n  );\n};\n\nexport default Create;","import React from 'react';\nimport './App.scss';\nimport {BrowserRouter, Link, Redirect, Route, Switch} from 'react-router-dom'\nimport FrontPage from \"../view/FrontPage\";\nimport Room from \"../view/Room\";\nimport {direction, Popup} from \"../component/Transition\";\nimport Join from \"../view/Join\";\nimport Create from \"../view/Create\";\n\nexport const App = () => {\n  return (\n    <BrowserRouter>\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/\" exact>\n            <header className=\"screen-header center big\">\n              <div className=\"inner\">\n                <h1 className=\"app-title\" key=\"header-title\">Signal</h1>\n              </div>\n            </header>\n          </Route>\n          <Route path=\"/join\">\n            <header className=\"screen-header center\">\n              <div className=\"inner\">\n                <Link className=\"back-navigation\" to=\"/\">〈</Link>\n                <h1 key=\"header-title\">CODE 입력</h1>\n              </div>\n            </header>\n          </Route>\n          <Route path=\"/:code(\\d+)\" render={({match: {params}}) => (\n            <header className=\"screen-header center transparent\">\n              <div className=\"inner\">\n                <Link className=\"back-navigation\" to=\"/join\">〈</Link>\n                <h1 key=\"header-title\">CODE : {params.code}</h1>\n              </div>\n            </header>\n          )}>\n\n          </Route>\n          <Route path=\"/create\">\n            <header className=\"screen-header center\">\n              <div className=\"inner\">\n                <Link className=\"back-navigation\" to=\"/\">〈</Link>\n                <h1 key=\"header-title\">방 만들기</h1>\n              </div>\n            </header>\n          </Route>\n          <Redirect to=\"/\"/>\n        </Switch>\n        <Popup path=\"/\" exact disableOnFirst from={direction.LEFT}>\n          <FrontPage/>\n        </Popup>\n        <Popup path=\"/join\" from={direction.RIGHT}>\n          <Join/>\n        </Popup>\n        <Popup path=\"/create\" from={direction.RIGHT}>\n          <Create/>\n        </Popup>\n        <Popup path=\"/:code(\\d+)\" from={direction.RIGHT}>\n          <Room/>\n        </Popup>\n      </div>\n    </BrowserRouter>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}