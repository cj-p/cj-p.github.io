(this["webpackJsonpinstant-video-call"]=this["webpackJsonpinstant-video-call"]||[]).push([[0],{18:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(19),i=n.n(s),o=(n(26),n(27),n(9)),u=n(2),j=(n(28),n(3)),l=["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83d\ude02","\ud83e\udd23","\u263a\ufe0f","\ud83d\ude0a","\ud83d\ude07","\ud83d\ude42","\ud83d\ude43","\ud83d\ude09","\ud83d\ude0c","\ud83d\ude0d","\ud83d\ude18","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\ud83d\ude0b","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude1b","\ud83e\udd11","\ud83e\udd17","\ud83e\udd13","\ud83d\ude0e","\ud83e\udd21","\ud83e\udd20","\ud83d\ude0f","\ud83d\ude12","\ud83d\ude1e","\ud83d\ude14","\ud83d\ude1f","\ud83d\ude15","\ud83d\ude41","\ud83d\ude23","\ud83d\ude16","\ud83d\ude2b","\ud83d\ude29","\ud83d\ude24","\ud83d\ude20","\ud83d\ude21","\ud83d\ude36","\ud83d\ude10","\ud83d\ude11","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude2e","\ud83d\ude32","\ud83d\ude35","\ud83d\ude33","\ud83d\ude31","\ud83d\ude28","\ud83d\ude30","\ud83d\ude22","\ud83d\ude25","\ud83e\udd24","\ud83d\ude2d","\ud83d\ude13","\ud83d\ude2a","\ud83d\ude34","\ud83d\ude44","\ud83e\udd14","\ud83e\udd25","\ud83d\ude2c","\ud83e\udd10","\ud83e\udd22","\ud83e\udd27","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83d\ude08","\ud83d\udc7f","\ud83d\udc79","\ud83d\udc7a","\ud83d\udca9","\ud83d\udc7b","\ud83d\udc80","\u2620\ufe0f","\ud83d\udc7d","\ud83d\udc7e","\ud83e\udd16","\ud83c\udf83","\ud83d\ude3a","\ud83d\ude38","\ud83d\ude39","\ud83d\ude3b","\ud83d\ude3c","\ud83d\ude3d","\ud83d\ude40","\ud83d\ude3f","\ud83d\ude3e"],b=function(){return l[Math.floor(Math.random()*l.length)]},d=function(e){var t=e.interval,n=void 0===t?500:t,a=Object(r.useState)(b()),s=Object(j.a)(a,2),i=s[0],o=s[1];return Object(r.useEffect)((function(){var e=setInterval((function(){return o(b())}),n);return function(){return clearInterval(e)}})),Object(c.jsx)(c.Fragment,{children:i})},f=function(){return Object(c.jsxs)("main",{className:"frontpage",children:[Object(c.jsxs)("div",{className:"banner",children:[Object(c.jsx)(d,{interval:800}),"\xa0\ud83d\udcbb\xa0\u21c6\ud83d\udcf1\xa0",Object(c.jsx)(d,{interval:900})]}),Object(c.jsxs)(o.b,{to:"./join",className:"button big join",children:[Object(c.jsx)("span",{className:"icon",children:"\ud83d\udd11"}),"\ucc38\uc5ec\ud558\uae30"]}),Object(c.jsx)("br",{}),Object(c.jsxs)(o.b,{to:"./create",className:"button big create",children:[Object(c.jsx)("span",{className:"icon",children:"\ud83d\udd28"}),"\ub9cc\ub4e4\uae30"]})]})},O=n(5),h=n.n(O),v=n(10),m=(n(38),function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=Promise.resolve("function"===typeof t?t():t);setTimeout((function(){return e(n)}),1e3)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=function(e){return m((function(){return{roomCode:e,isPrivate:!0}}))},x=function(e){console.error(e),alert("\ud83d\ude40 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.")},g=function(e){var t=e.password;return m((function(){if("1234"===t)return"AWSConnectionId";throw new Error}))},N=n(17),y=(n(39),function(e){var t=e.tag,n=void 0===t?"div":t,r=e.isLoading,a=e.bound,s=void 0!==a&&a,i=e.className,o=void 0===i?"":i,u=e.style,j=e.children;return Object(c.jsxs)(n,{className:"loading-container ".concat(o),style:Object(N.a)(Object(N.a)({},u),s?{position:"relative"}:{}),children:[j,r&&Object(c.jsx)("div",{className:"spinner"})]})}),w=(n(40),function(){return Object(c.jsx)("div",{className:"advertisement",children:"\uad11\uace0\uc601\uc5ed"})}),E=(n(18),function(e){var t=e.onLoad,n=void 0===t?function(){}:t,a=Object(r.useRef)(null),s=Object(r.useRef)(),i=Object(r.useRef)(n),o=Object(r.useState)(!1),u=Object(j.a)(o,2),l=u[0],b=u[1];Object(r.useEffect)((function(){i.current=n}),[n]);var d=Object(r.useCallback)(function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:return s.current=e.sent,t&&(t.srcObject=s.current),e.next=6,new Promise((function(e){return t.addEventListener("play",e,{once:!0})}));case 6:b(!0),i.current();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){a.current&&d(null===a||void 0===a?void 0:a.current)}),[d]),Object(c.jsx)("div",{className:"local-video ".concat(l?"":"unloaded"),children:Object(c.jsx)("video",{autoPlay:!0,muted:!0,playsInline:!0,ref:a,style:{transform:"rotateY(180deg)"}})})}),S=function(e){var t=e.onLoad,n=void 0===t?function(){}:t,a=Object(r.useRef)(null),s=Object(r.useRef)(),i=Object(r.useRef)(n),o=Object(r.useState)(!1),u=Object(j.a)(o,2),l=u[0],b=u[1];Object(r.useEffect)((function(){i.current=n}),[n]);var d=Object(r.useCallback)(function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:return s.current=e.sent,t&&(t.srcObject=s.current),e.next=6,new Promise((function(e){return t.addEventListener("play",e,{once:!0})}));case 6:b(!0),i.current();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){a.current&&d(null===a||void 0===a?void 0:a.current)}),[d]),Object(c.jsx)("div",{className:"remote-video ".concat(l?"":"unloaded"),children:Object(c.jsx)("video",{autoPlay:!0,muted:!0,playsInline:!0,ref:a,style:{transform:"rotateY(180deg)"}})})},k=function(){var e=Object(u.h)().code,t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),o=Object(j.a)(i,2),l=o[0],b=o[1],d=Object(r.useState)(!1),f=Object(j.a)(d,2),O=f[0],m=f[1],N=Object(r.useState)(!1),k=Object(j.a)(N,2),R=k[0],L=k[1],C=Object(r.useState)(!1),I=Object(j.a)(C,2),F=(I[0],I[1]),T=Object(r.useState)(!1),P=Object(j.a)(T,2),D=P[0],M=P[1],G=Object(r.useState)(""),H=Object(j.a)(G,2),A=H[0],B=H[1],J=Object(r.useState)(),U=Object(j.a)(J,2),W=U[0],Y=U[1],q=Object(r.useRef)(null),z=function(){var e=Object(v.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t);case 3:n=e.sent,c=n.isPrivate,s(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0);case 11:return e.prev=11,L(!0),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.t0=Y,e.next=5,g({password:A});case 5:e.t1=e.sent,(0,e.t0)(e.t1),M(!1),e.next=15;break;case 10:e.prev=10,e.t2=e.catch(0),Y(void 0),M(!0),null===q||void 0===q||null===(t=q.current)||void 0===t||t.focus();case 15:return e.prev=15,F(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,10,15,18]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){z(parseInt(e,10))}),[e]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(y,{tag:"main",className:"room ".concat(W?"entered":""),isLoading:!1,children:[W&&Object(c.jsx)(y,{className:"remote-video-container",isLoading:!O,children:Object(c.jsx)(S,{onLoad:function(){return m(!0)}})}),Object(c.jsx)(y,{className:"local-video-container",isLoading:!l,children:Object(c.jsx)(E,{onLoad:function(){return b(!0)}})}),R&&Object(c.jsxs)("form",{className:"controls ".concat(a?"is-room-private":""),onSubmit:function(e){e.preventDefault(),K()},children:[a&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("label",{htmlFor:"room-password",className:D?"wrong":"",children:D?"\uc62c\ubc14\ub978 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694":"\ube44\ubc00\ubc88\ud638"}),Object(c.jsx)("input",{id:"room-password",required:!0,type:"password",className:"input big control password",ref:q,value:A,onChange:function(e){return B(e.target.value)}})]}),Object(c.jsxs)("button",{type:"submit",className:"button big control enter",children:[Object(c.jsx)("span",{className:"icon",children:"\ud83d\udeaa"}),"\uc785\uc7a5"]})]})]}),Object(c.jsx)("footer",{children:Object(c.jsx)(w,{})})]})},R=(n(41),{TOP:Symbol("top"),RIGHT:Symbol("right"),BOTTOM:Symbol("bottom"),LEFT:Symbol("left")}),L=function(e){var t=e.on,n=e.off,c=Object(r.useRef)(t),a=Object(r.useRef)(n);return Object(r.useEffect)((function(){c.current=t}),[t]),Object(r.useEffect)((function(){a.current=n}),[n]),Object(r.useEffect)((function(){return c.current(),a.current}),[]),null},C=function(e){var t=e.path,n=e.exact,a=e.from,s=e.disableOnFirst,i=void 0!==s&&s,o=e.transition,l=void 0===o?".3s":o,b=e.children,d=Object(r.useState)(i),f=Object(j.a)(d,2),O=f[0],h=f[1],v=Object(r.useRef)(null),m=Object(r.useRef)(!1),p=Object(r.useState)(i),x=Object(j.a)(p,2),g=x[0],N=x[1],y=Object(r.useRef)(O);return Object(r.useEffect)((function(){y.current=O}),[O]),Object(r.useEffect)((function(){if(null!=v.current){var e=function(){y.current||N(!1)},t=v.current;return t.addEventListener("transitionend",e),function(){return t.removeEventListener("transitionend",e)}}}),[v.current]),Object(r.useEffect)((function(){if(g&&null!=v.current&&m.current){v.current.offsetWidth;h(!0),m.current=!1}}),[g,v.current]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.b,{path:t,exact:n,children:Object(c.jsx)(L,{on:function(){N(!0),m.current=!0},off:function(){return h(!1)}})}),g&&Object(c.jsx)("div",{ref:v,className:"transition popup ".concat(O?"on":a.description),style:{transition:l},children:b})]})},I=(n(42),function(){var e=Object(u.g)(),t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),o=Object(j.a)(i,2),l=o[0],b=o[1],d=Object(r.useRef)(null);return Object(r.useEffect)((function(){a.length>=6&&e.push("/".concat(a))}),[a]),Object(c.jsx)("main",{className:"join",children:Object(c.jsxs)("label",{className:"inputs ".concat(l?"focus":""),children:[Object(c.jsx)("input",{ref:d,type:"number",inputMode:"numeric",value:a,style:{opacity:0,zIndex:-1,position:"absolute"},onFocus:function(){return b(!0)},onBlur:function(){return b(!1)},onKeyDown:function(e){8===e.keyCode||48<=e.keyCode&&e.keyCode<=57||e.preventDefault()},onChange:function(e){var t;(s("".concat(e.target.value).slice(0,6)),e.target.value.length>=6)&&(null===d||void 0===d||null===(t=d.current)||void 0===t||t.blur())}}),new Array(6).fill(null).map((function(e,t){return Object(c.jsx)("span",{className:"individual-number ".concat(a.length===t?"last":""),onClick:function(){var e;return null===d||void 0===d||null===(e=d.current)||void 0===e?void 0:e.focus()},children:a[t]||" "},t)}))]})})}),F=(n(43),function(){return Object(c.jsx)("main",{className:"create"})}),T=function(){return Object(c.jsx)(o.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{path:"/",exact:!0,children:Object(c.jsx)("header",{className:"screen-header center big",children:Object(c.jsx)("div",{className:"inner",children:Object(c.jsx)("h1",{className:"app-title",children:"Signal"},"header-title")})})}),Object(c.jsx)(u.b,{path:"/join",children:Object(c.jsx)("header",{className:"screen-header center",children:Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)(o.b,{className:"back-navigation",to:"/",children:"\u3008"}),Object(c.jsx)("h1",{children:"CODE \uc785\ub825"},"header-title")]})})}),Object(c.jsx)(u.b,{path:"/:code(\\d+)",render:function(e){var t=e.match.params;return Object(c.jsx)("header",{className:"screen-header center transparent",children:Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)(o.b,{className:"back-navigation",to:"/join",children:"\u3008"}),Object(c.jsxs)("h1",{children:["CODE : ",t.code]},"header-title")]})})}}),Object(c.jsx)(u.b,{path:"/create",children:Object(c.jsx)("header",{className:"screen-header center",children:Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)(o.b,{className:"back-navigation",to:"/",children:"\u3008"}),Object(c.jsx)("h1",{children:"\ubc29 \ub9cc\ub4e4\uae30"},"header-title")]})})}),Object(c.jsx)(u.a,{to:"/"})]}),Object(c.jsx)(C,{path:"/",exact:!0,disableOnFirst:!0,from:R.LEFT,children:Object(c.jsx)(f,{})}),Object(c.jsx)(C,{path:"/join",from:R.RIGHT,children:Object(c.jsx)(I,{})}),Object(c.jsx)(C,{path:"/create",from:R.RIGHT,children:Object(c.jsx)(F,{})}),Object(c.jsx)(C,{path:"/:code(\\d+)",from:R.RIGHT,children:Object(c.jsx)(k,{})})]})})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.b6d94bf8.chunk.js.map